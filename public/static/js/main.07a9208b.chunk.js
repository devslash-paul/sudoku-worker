(this.webpackJsonpsudoku=this.webpackJsonpsudoku||[]).push([[0],{55:function(e,t,n){e.exports=n(75)},60:function(e,t,n){},61:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var a,l=n(0),r=n.n(l),i=n(11),o=n.n(i),u=(n(60),n(61),n(28)),s=n(14);!function(e){e[e.NORMAL=1]="NORMAL",e[e.FROZEN=2]="FROZEN",e[e.PAINTING=3]="PAINTING"}(a||(a={}));var c="INSERT",m="INSERT_SMALL",f="DELETE",d="CLEAR_HISTORY",h="SIDEBAR",p="NEW",b="HIGHLIGHT_CHANGE",g="IMPORT",v="RESIZE",N="RESIZE_START",E="RESIZE_END",O="PAINT",y="BEGIN_PAINING",x="END_PAINING",j="SEND_COORD";var w=n(8),S=n(2),k=n(29),I=n(19),R=n(30),z=n(31),C=n(32),A={color:"black",boxSizing:"border-box",textAlign:"center",background:"white"},M={color:"red",fontWeight:"bold"},T=function(e){function t(){var e,n;Object(k.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(R.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(l)))).onMouseover=function(e){e.buttons&&n.props.onMouseover()},n}return Object(C.a)(t,e),Object(I.a)(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.number!==e.number||this.props.selected!==e.selected||this.props.small!==e.small||this.props.size!==e.size||this.props.highlight!==e.highlight}},{key:"render",value:function(){var e=this,t=this.props.size,n=Object(S.a)({},A,{flexBasis:"calc(100%/"+this.props.cells+")",fontSize:"".concat(t-10,"px"),height:"".concat(t,"px"),lineHeight:"".concat(t,"px"),position:"relative",padding:"2px",justifyItems:"center",alignItems:"center",background:this.props.selected?"rgba(0,0,255,0.2)":"white"}),a=this.props.number?this.getLargeCell():this.getSmallCell(),l=Object(S.a)({},n,{display:"grid",gridTemplateColumns:"33% 34% 33%",gridTemplateRows:"33% 34% 33%"});return r.a.createElement("div",{tabIndex:0,style:l,className:"tile",onMouseDown:function(t){return e.props.onClick(t.shiftKey)},onKeyDown:function(t){return e.props.onInput(t.keyCode,t.shiftKey,t.metaKey)},onMouseMove:this.onMouseover,onBlur:this.props.onBlur},a)}},{key:"getSmallCell",value:function(){var e=this;return this.props.small.map((function(t){var n=Math.floor(e.props.size/4),a={fontSize:"".concat(n,"px"),height:"".concat(n,"px"),lineHeight:"".concat(n,"px"),gridRow:"".concat(Math.floor((t-1)/3)+1),gridColumn:(t-1)%3+1};return e.props.highlight===t&&(a=Object(S.a)({},a,{},M)),r.a.createElement("div",{key:t,style:a,className:"smallContent",onClick:function(){return e.props.onClickText(t)}},t)}))}},{key:"getLargeCell",value:function(){var e=this;if(null==this.props.number)throw Error();var t=this.props.highlight===this.props.number?M:{},n=Object(S.a)({},t,{gridRow:"1/4",gridColumn:"1/4"});return r.a.createElement("div",{className:"content",onClick:function(){return e.props.number&&e.props.onClickText(e.props.number)},style:n},this.props.number)}}]),t}(l.Component),D=function(e,t){return function(n){if(1===e.size){var a=e.values().next().value,l=a;switch(n){case"UP":l-=9;break;case"DOWN":l+=9;break;case"LEFT":l-=1;break;case"RIGHT":l+=1}l<=-1&&(l=a),l>=81&&(l=a);var r=new Set;r.add(l),t(r)}}},L=function(e,t,n,a,l){return function(e,r,i){if(46===e||8===e)return a(t);if(!i){if(e>=49&&e<=57||e>=97&&e<=105)e>57&&(e-=48),e-=48,r||1!==t.size?r&&l.onEnterSmallNum(Array.from(t),e):l.onEnterNum(t.values().next().value,e);else if(8===e||46===e)return a(t);if(1===t.size){if(38===e)return n("UP");if(37===e)return n("LEFT");if(40===e)return n("DOWN");if(39===e)return n("RIGHT")}}}},H=function(e){var t={display:"flex",pointerEvents:"all",flexFlow:"row wrap",width:"".concat(e.size,"px"),lineHeight:"".concat(e.size,"px")},n=e.interact,a=new Set,i=Object(l.useState)(a),o=Object(s.a)(i,2),u=o[0],c=o[1],m=Object(l.useState)(null),f=Object(s.a)(m,2),d=f[0],h=f[1],p=e.board.map((function(t,a){return r.a.createElement(T,{key:a,number:t.mainNum,small:t.small,cells:9,size:e.size/9,highlight:d,selected:u.has(a),focused:u.has(a)&&1===u.size,onClickText:function(e){n&&h(e)},onClick:function(e){if(n)if(e){var t=new Set(u);t.add(a),c(t)}else{var l=new Set;l.add(a),c(l)}},onBlur:function(){n&&h(null)},onInput:L(0,u,D(u,c),e.onDelete,e),onMouseover:function(){if(n){var e=new Set(u);e.add(a),c(e)}}})}));return r.a.createElement("div",{tabIndex:1,className:"box",style:t},p)},P=Object(w.b)((function(e){return{board:e.cells,size:e.settings.boardSize,interact:e.settings.state===a.NORMAL}}),(function(e){return{onEnterNum:function(t,n){e(function(e,t){return{type:c,index:e,number:t}}(t,n))},onEnterSmallNum:function(t,n){e(function(e,t){return{type:m,number:t,index:e}}(t,n))},onDelete:function(t){e(function(e){return{type:f,index:e}}(t))}}}))(H),G=n(4),B={"000":0,1111:1,"001":2,"010":3,"011":4,100:5,101:6,1100:7,1101:8,1110:9},F={0:"000",1:"1111",2:"001",3:"010",4:"011",5:"100",6:"101",7:"1100",8:"1101",9:"1110"},W={0:"000",1:"001",2:"010",3:"011",4:"100",5:"101",6:"110",7:"111"};function _(e){for(var t=e.map((function(e){return null==e.mainNum?0:1})),n="",a=0;a<t.length;){if(1===t[a])n+=W[0],a++;else if(-1===t.indexOf(1,a)){var l=Math.min(7,t.length-a);n+=W[l],a+=l}else{var r=Math.min(t.indexOf(1,a),7);n+=W[r],a+=r}if(a>90)break}var i=e.filter((function(e){return null!=e.mainNum})).map((function(e){return e.mainNum})).map((function(e){return F[""+e]})).reduce((function(e,t){return e+t}),"");return function(e){var t=e.toString(2),n=[];t.length%8>0&&(t=t.padEnd(t.length+(8-t.length%8),"0"));for(var a=0;a<t.length/8;a++)n.push(t.substring(8*a,8*a+8));return btoa(String.fromCharCode.apply(null,n.map((function(e){return parseInt(e,2)})))).replace(/\//g,"-").replace(/\+/g,"_").replace(/=/g,"")}(BigInt("0b"+n+i))}function U(e){for(var t=BigInt("0x"+e).toString(2),n=new Array(81),a=0,l="",r=0;a<81;)l+=t.charAt(r),r++,void 0!==B[l]&&(n[a++]={mainNum:B[l],small:[]},l="");return n}var V=function(){if(window.location.pathname.startsWith("/share/")){var e=window.location.pathname.substring("/share/".length);return window.history.pushState({},"Sudoku UI","/"),Object(S.a)({},Z,{settings:Object(S.a)({},Z.settings,{frozen:!1}),cells:U(e)})}var t=localStorage.getItem("state");return null!=t?JSON.parse(t):Object(S.a)({},Z,{settings:Object(S.a)({},Z.settings,{frozen:!1})})},Z={history:{items:[],activeItem:-1},paintState:{links:[],paintStart:null},settings:{state:a.NORMAL,enableHighlight:!1,boardSize:450},cells:[{mainNum:9,small:[]},{mainNum:null,small:[2,1,3]},{mainNum:null,small:[2,1,3]},{mainNum:null,small:[4,6,1]},{mainNum:5,small:[]},{mainNum:null,small:[4,1,7]},{mainNum:null,small:[3,7]},{mainNum:8,small:[]},{mainNum:null,small:[6,1,7]},{mainNum:null,small:[1,3,5]},{mainNum:4,small:[4]},{mainNum:8,small:[]},{mainNum:null,small:[6,1,2]},{mainNum:null,small:[2,7]},{mainNum:null,small:[1,2,7]},{mainNum:9,small:[]},{mainNum:null,small:[3,5,1]},{mainNum:null,small:[6,1,7]},{mainNum:null,small:[7,1,5]},{mainNum:6,small:[6]},{mainNum:null,small:[7,1,5]},{mainNum:3,small:[]},{mainNum:null,small:[8,9]},{mainNum:null,small:[8,9]},{mainNum:2,small:[]},{mainNum:null,small:[5,1]},{mainNum:4,small:[]},{mainNum:null,small:[1,8]},{mainNum:null,small:[1,2,3,8]},{mainNum:null,small:[1,2,3]},{mainNum:7,small:[]},{mainNum:null,small:[9,2,4,8]},{mainNum:null,small:[1,9,2,4,8]},{mainNum:null,small:[3,4]},{mainNum:6,small:[]},{mainNum:5,small:[]},{mainNum:null,small:[7,5,3,8]},{mainNum:null,small:[7,2,3,8]},{mainNum:6,small:[]},{mainNum:null,small:[5,2,4,8]},{mainNum:null,small:[2,4,8]},{mainNum:null,small:[2,4,8]},{mainNum:1,small:[]},{mainNum:null,small:[3,4]},{mainNum:9,small:[]},{mainNum:4,small:[]},{mainNum:9,small:[]},{mainNum:null,small:[5,1]},{mainNum:null,small:[1,5]},{mainNum:6,small:[6]},{mainNum:3,small:[]},{mainNum:null,small:[7,8]},{mainNum:2,small:[2]},{mainNum:null,small:[7,8]},{mainNum:2,small:[]},{mainNum:null,small:[3,7,8]},{mainNum:9,small:[]},{mainNum:null,small:[4,7,8]},{mainNum:null,small:[3,4,7,8]},{mainNum:6,small:[]},{mainNum:5,small:[5]},{mainNum:null,small:[1,4]},{mainNum:null,small:[1,8]},{mainNum:null,small:[1,3,8]},{mainNum:null,small:[1,3,8]},{mainNum:4,small:[]},{mainNum:9,small:[5]},{mainNum:null,small:[3,8]},{mainNum:5,small:[5]},{mainNum:6,small:[]},{mainNum:7,small:[]},{mainNum:2,small:[2]},{mainNum:6,small:[]},{mainNum:5,small:[]},{mainNum:null,small:[7,8]},{mainNum:null,small:[2,4,7,8]},{mainNum:1,small:[]},{mainNum:null,small:[2,4,7,8]},{mainNum:null,small:[4,8]},{mainNum:9,small:[2]},{mainNum:3,small:[]}]};function J(e,t){switch(t.type){case O:return function(e,t){switch(t.subtype){case y:return Object(S.a)({},e,{settings:Object(S.a)({},e.settings,{state:a.PAINTING})});case x:return Object(S.a)({},e,{settings:Object(S.a)({},e.settings,{state:a.NORMAL}),paintState:{links:[],paintStart:null}})}}(e,t);case j:return function(e,t){var n=e.cells[t.coordinate.cell],a=n.small,l=t.coordinate,r=e.paintState.paintStart;if(null==r||null!=n.mainNum||-1===a.indexOf(t.coordinate.subcell+1))return e;if(t.coordinate===e.paintState.paintStart){var i=Object(G.a)(e.paintState.links);return Object(S.a)({},e,{paintState:Object(S.a)({},e.paintState,{links:i,paintStart:null})})}var o={start:r,end:l};return Object(S.a)({},e,{paintState:Object(S.a)({},e.paintState,{links:[].concat(Object(G.a)(e.paintState.links),[o]),paintStart:null})})}(e,t)}return Object(S.a)({},e)}var Y=function(e){var t=null,n=[];if(0===e.length)return[];for(var a=0;a<e.length;a++)if(null!==t){var l=e[a];t.kind===l.kind&&JSON.stringify(t.small)===JSON.stringify(l.small)?t=Object(S.a)({},t,{index:[].concat(Object(G.a)(t.index),Object(G.a)(l.index))}):(n.push(t),t=l)}else t=e[a];return null!==t&&n.push(t),n},X=function(e,t){switch(e){case a.NORMAL:return!0;case a.FROZEN:return t.type===v||t.type===E||t.type===N}return!0};var K=n(22),Q=n(48),$=Object(K.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V(),t=arguments.length>1?arguments[1]:void 0;if(!X(e.settings.state,t))return e;if(function(e,t){return e.settings.state===a.PAINTING||t.type===O}(e,t))return J(e,t);switch(t.type){case v:case N:case E:return function(e,t){if(t.type===v)return Object(S.a)({},e,{settings:Object(S.a)({},e.settings,{boardSize:t.size})});var n=t.type===N;return Object(S.a)({},e,{settings:Object(S.a)({},e.settings,{state:n?a.FROZEN:a.NORMAL})})}(e,t);case c:return function(e,t,n){var a=Object(G.a)(e.cells),l=a[t];if(l.mainNum===n)return e;a[t]=Object(S.a)({},l,{mainNum:n});var r=[].concat(Object(G.a)(e.history.items),[{kind:"ADD",large:n,index:[t]}]);return Object(S.a)({},e,{cells:a,history:{items:r,activeItem:r.length-1}})}(e,t.index,t.number);case m:return function(e,t){var n=Object(G.a)(e.cells),a=t.index.filter((function(e){return null==n[e].mainNum})),l=a.map((function(e){return-1===n[e].small.indexOf(t.number)})).reduce((function(e,t){return e||t}),!1);a.forEach((function(e){var a=-1!==n[e].small.indexOf(t.number);l&&!a?n[e]=Object(S.a)({},n[e],{small:[].concat(Object(G.a)(n[e].small),[t.number])}):!l&&a&&(n[e]=Object(S.a)({},n[e],{small:n[e].small.filter((function(e){return e!==t.number}))}))}));var r=a.map((function(e){return{kind:l?"ADD":"REMOVE",index:[e],small:[t.number]}})),i=[].concat(Object(G.a)(e.history.items),Object(G.a)(Y(r)));return Object(S.a)({},e,{cells:Object(G.a)(n),history:{items:i,activeItem:i.length-1}})}(e,t);case f:return function(e,t){var n=Object(G.a)(e.cells),a=[];t.index.forEach((function(t){var l=e.cells[t],r=Object(G.a)(n);null==l.mainNum?(a.push({kind:"REMOVE",index:[t],small:l.small}),l=Object(S.a)({},l,{small:[]})):(a.push({kind:"REMOVE",index:[t],large:l.mainNum}),l=Object(S.a)({},l,{mainNum:null})),r[t]=l,n=Object(G.a)(r)}));var l=[].concat(Object(G.a)(e.history.items),Object(G.a)(Y(a)));return Object(S.a)({},e,{cells:n,history:Object(S.a)({},e.history,{items:l,activeItem:l.length-1})})}(e,t);case b:return function(e,t){return Object(S.a)({},e,{settings:Object(S.a)({},e.settings,{enableHighlight:t})})}(e,t.value);case h:return function(e,t){switch(t.subtype){case p:var n=new Array(81).fill({mainNum:null,small:[]});return Object(S.a)({},e,{cells:n,history:{items:[],activeItem:-1}})}}(e,t);case g:return function(e,t){for(var n=new Array(81),a=0;a<81;a++)"0"===t.charAt(a)||isNaN(parseInt(t.charAt(a)))?n[a]={mainNum:null,small:[]}:n[a]={mainNum:parseInt(t.charAt(a)),small:[]};return Object(S.a)({},e,{cells:n})}(e,t.value);case d:return function(e){return Object(S.a)({},e,{history:{items:[],activeItem:-1}})}(e);default:return e}}),Object(Q.composeWithDevTools)());$.subscribe((function(){return localStorage.setItem("state",JSON.stringify($.getState()))}));var q=n(50),ee=n.n(q),te=n(91);var ne=n(52),ae=n(49),le=n.n(ae),re=n(37),ie=n.n(re),oe=n(38),ue=n.n(oe),se={height:"145px",overflowY:"scroll",overflowX:"hidden",background:"white",boxSizing:"border-box"};function ce(e){var t=new Set,n=new Set,a=[];if(e.forEach((function(e){var l=Math.floor(e/9)+1,r=e%9+1;t.add(l),n.add(r),a.push("r".concat(l,"c").concat(r))})),1===t.size){var l=Array.from(n.values()).map((function(e){return""+e})).reduce((function(e,t){return e+t}),"");return"r".concat(t.values().next().value,"c").concat(l)}if(1===n.size){var r=Array.from(t.values()).map((function(e){return""+e})).reduce((function(e,t){return e+t}),"");return"r".concat(r,"c").concat(n.values().next().value)}return a}var me=function(e){var t=e.item,n=e.style,a=function(e){switch(e.kind){case"ADD":if(e.large)return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie.a,null)," ",e.large," to ",ce(e.index));if(e.small)return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie.a,null)," ",e.small," as pencil marks to cell ",ce(e.index));break;case"REMOVE":if(e.large)return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,null)," ",e.large," to cell ",ce(e.index));if(e.small)return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,null)," ",e.small," as pencil marks to cell ",ce(e.index))}}(t);return r.a.createElement("div",{style:Object(S.a)({},{display:"flex",border:"1px solid black",alignItems:"center",paddingRight:"5px",paddingLeft:"2px",borderRadius:"2px",boxSizing:"border-box"},{},n)},a,r.a.createElement(le.a,{style:{marginLeft:"auto"}}))},fe=Object(w.b)((function(e){return{events:Object(G.a)(e.history.items).reverse()}}))((function(e){return r.a.createElement(ne.a,{height:150,itemCount:e.events.length,itemSize:35,width:"100%",style:se},(function(t){var n=t.index,a=t.style;return r.a.createElement(me,{style:a,item:e.events[n]})}))})),de=n(90),he={boxSizing:"border-box",background:"white",height:"33px",width:"33px",border:"1px solid black",lineHeight:"33px",fontSize:"27.5px"},pe={margin:"0px",borderRadius:"0",background:"#f2f2f2",boxSizing:"border-box",flexGrow:1},be={borderTopLeftRadius:"10px"},ge={borderTopRightRadius:"10px"},ve=Object(w.b)((function(e){return{painting:e.settings.state===a.PAINTING,settings:e.settings,full:function(){return _(e.cells)}}}),(function(e){return{onNew:function(){return e({type:h,subtype:p})},onChangeHighlight:function(t){return e(function(e){return{type:b,value:e}}(t))},onChangePainting:function(t){return e(function(e){return{type:O,subtype:e?y:x}}(t))},doImport:function(t){return e(function(e){return{type:g,value:e}}(t))}}}))((function(e){var t=Object(u.useToasts)().addToast,n=function(e){},a=function(){};return r.a.createElement(r.a.Fragment,null,r.a.createElement(de.a,{container:!0},r.a.createElement(te.a,{disableElevation:!0,style:Object(S.a)({},pe,{},be),variant:"outlined",onClick:e.onNew},"New"),r.a.createElement(te.a,{disableElevation:!0,style:pe,variant:"outlined",onClick:function(t){return function(e){var t=window.prompt("Please enter the sodoku: ");null!==t&&e(t)}(e.doImport)}},"Import"),r.a.createElement(te.a,{disableElevation:!0,style:Object(S.a)({},pe,{},ge),variant:"outlined",onClick:function(){return function(e,t){navigator.clipboard.writeText(window.location.host+"/share/"+t()),e("URL copied to clipboard",{appearance:"info",autoDismiss:!0})}(t,e.full)}},"Share")),r.a.createElement(de.a,{container:!0},r.a.createElement(te.a,{disableElevation:!0,variant:"outlined",style:pe},"Undo"),r.a.createElement(te.a,{disableElevation:!0,variant:"outlined",style:pe},"Redo")),r.a.createElement(de.a,null,r.a.createElement(te.a,{variant:"outlined",style:pe,disableElevation:!0},r.a.createElement("span",{style:he},r.a.createElement("div",null,"1"))),r.a.createElement(te.a,{variant:"outlined",style:pe,disableElevation:!0},r.a.createElement(T,{number:null,small:[1,2,3,4,5,6,7,8,9],selected:!1,focused:!1,size:33,cells:1,highlight:null,onClick:n,onClickText:n,onBlur:a,onMouseover:a,onInput:n}))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"highlight"},"Enable Highlights"),r.a.createElement("input",{id:"highlight",type:"checkbox",checked:e.settings.enableHighlight,onChange:function(t){return e.onChangeHighlight(t.target.checked)}})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"painting"},"Enable Painting"),r.a.createElement("input",{id:"painting",type:"checkbox",checked:e.painting,onChange:function(t){return e.onChangePainting(t.target.checked)}})))})),Ne=Object(w.b)((function(e){return{board:(t=e.cells,t.map((function(e){return e.mainNum||"0"})).reduce((function(e,t){return e+t}),"")),boardCells:e.cells};var t}),(function(e){return{clearHistory:function(){return e({type:d})}}}))((function(e){var t=function(e){};return r.a.createElement("div",null,r.a.createElement(ve,null),r.a.createElement("h5",null,"Saved Boards"),r.a.createElement(te.a,{variant:"contained",color:"primary"},"Save"),r.a.createElement(H,{board:e.boardCells,interact:!1,size:200,onEnterNum:t,onEnterSmallNum:t,onDelete:t}),r.a.createElement("h5",null,"History ",r.a.createElement(ee.a,{onClick:e.clearHistory})),r.a.createElement(fe,null),r.a.createElement("h5",null,"External resources"),r.a.createElement("a",{href:"https://www.sudokuwiki.org/sudoku.html?db="+e.board,target:"_blank",rel:"noopener noreferrer"},"Sudoku Wiki"))})),Ee={display:"flex",height:"100vh"},Oe={position:"relative",margin:"auto",padding:"20px"},ye={position:"relative",background:"rgb(170, 170, 170)",padding:"20px",width:"22%",minWidth:"270px",minHeight:"100vh",maxHeight:"100vh",overflowY:"scroll"},xe={right:"-15px",top:"50vh",position:"absolute",background:"lightgray",padding:"10px",borderTopRightRadius:"15px",borderBottomRightRadius:"15px"},je={position:"relative"},we=function(e){function t(){return Object(k.a)(this,t),Object(R.a)(this,Object(z.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:Ee},r.a.createElement("div",{style:je},r.a.createElement("span",{style:xe},"X"),r.a.createElement("div",{style:ye},this.props.side)),r.a.createElement("div",{style:Oe},this.props.board))}}]),t}(r.a.PureComponent),Se=n(51);var ke=Object(w.b)((function(e){return{size:e.settings.boardSize}}),(function(e){return{onDrag:function(t,n){var a;e((a=n.size.width,{type:v,size:a}))},onDragStart:function(t,n){e({type:N})},onDragEnd:function(t,n){e({type:E})}}}))((function(e){return r.a.createElement(Se.ResizableBox,{width:e.size,height:e.size,minConstraints:[450,450],lockAspectRatio:!0,onResize:e.onDrag,onResizeStart:e.onDragStart,onResizeStop:e.onDragEnd},e.children)})),Ie=function(e,t,n){var a=e/9,l=a/3,r=Math.floor(t/a),i=9*Math.floor(n/a)+r,o=Math.floor(t/l%3);return{cell:i,subcell:3*Math.floor(n/l%3)+o}},Re=function(e,t){var n=t.cell,a=t.subcell,l=e/9,r=l/3,i=n%9*l;i+=a%3*r+r/2;var o=Math.floor(n/9)*l;return[i,o+=Math.floor(a/3)*r+r/2]},ze=function(e,t,n){var a=e/27,l=a;return[Math.round((t-.5*a)/l)*l+.5*a,Math.round((n-.5*a)/l)*l+.5*a]},Ce=function(e){var t=e.start,n=e.end,a=e.seen,l=e.size,i=a.has(t),o=a.has(n),u=Re(l,t),s=Re(l,n),c=l/9/4,m=u[0]-c/2,f=u[1]-c/2,d=s[0]-c/2,h=s[1]-c/2,p=i?null:r.a.createElement("rect",{x:m,y:f,width:.8*c,height:.9*c,fill:"rgba(174, 214, 157, 0.2)",style:{pointerEvents:"none"}}),b=o?null:r.a.createElement("rect",{x:d,y:h,width:.8*c,height:.9*c,fill:"rgba(245, 240, 129, 0.2)",style:{pointerEvents:"none"}}),g=(u[0]+s[0])/2,v=(u[1]+s[1])/2;return r.a.createElement("g",null,r.a.createElement("path",{d:"M ".concat(u[0]," ").concat(u[1]," Q ").concat(g," ").concat(v,"\n        ").concat(s[0]," ").concat(s[1]),fill:"transparent",stroke:"#0000ffaa",style:{pointerEvents:"none"}}),p,b)},Ae={position:"absolute",zIndex:2},Me={pointerEvents:"none",stroke:"green"},Te=function(e,t,n){return function(a){if(a.target instanceof SVGElement&&(null===n||void 0===n?void 0:n.start)){var l=a.target.getBoundingClientRect(),r=ze(e,a.clientX-l.left,a.clientY-l.top),i=Object(s.a)(r,2),o=i[0],u=i[1];t(Object(S.a)({},n,{x:o,y:u}))}}},De=function(e,t,n,a,l,r){return function(i){return null==r?He(e,i,a,t):Le(e,i,r,l,a,n,t)}},Le=function(e,t,n,a,l,r,i){if(t.target instanceof SVGElement){var o=t.target.getBoundingClientRect(),u=ze(e,t.clientX-o.left,t.clientY-o.top),c=Object(s.a)(u,2),m=c[0],f=c[1],d=Ie(e,m,f);if(-1!==i[d.cell].small.indexOf(d.subcell+1)&&null!==n){var h={start:n.start,end:d};r([].concat(Object(G.a)(a),[h])),l(null)}}},He=function(e,t,n,a){if(t.target instanceof SVGElement){var l=t.target.getBoundingClientRect(),r=ze(e,t.clientX-l.left,t.clientY-l.top),i=Object(s.a)(r,2),o=i[0],u=i[1],c=Ie(e,o,u);-1!==a[c.cell].small.indexOf(c.subcell+1)&&n({start:c,x:o,y:u})}},Pe=Object(w.b)((function(e){return{size:e.settings.boardSize,board:e.cells}}))((function(e){var t=e.size,n=Object(l.useState)([]),a=Object(s.a)(n,2),i=a[0],o=a[1],u=Object(l.useState)(null),c=Object(s.a)(u,2),m=c[0],f=c[1],d=i.map((function(e){return r.a.createElement(Ce,{seen:new Set,size:t,start:e.start,end:e.end})})),h=r.a.createElement(r.a.Fragment,null);if(m){var p=Re(t,m.start),b=Object(s.a)(p,2),g=b[0],v=b[1];h=r.a.createElement("path",{d:"M ".concat(g," ").concat(v," L ").concat(m.x," ").concat(m.y),style:Me})}return r.a.createElement("svg",{width:e.size,height:e.size,style:Ae,onClick:De(t,e.board,o,f,i,m),onMouseMove:Te(t,f,m)},d,h)})),Ge=Object(w.b)((function(e){return{enabled:e.settings.state===a.PAINTING,size:e.settings.boardSize}}))((function(e){if(!e.enabled)return r.a.createElement(r.a.Fragment,null);var t=r.a.createElement(Pe,null);return r.a.createElement("div",null,t)})),Be=function(){var e=r.a.createElement(ke,null,r.a.createElement(Ge,null),r.a.createElement(P,null));return r.a.createElement(w.a,{store:$},r.a.createElement(u.ToastProvider,null,r.a.createElement(we,{board:e,side:r.a.createElement(Ne,null)})))},Fe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function We(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(Be,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Fe?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):We(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):We(t,e)}))}}()}},[[55,1,2]]]);
//# sourceMappingURL=main.07a9208b.chunk.js.map